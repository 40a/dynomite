<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Basic benchmarking - Dynomite</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Basic benchmarking";
    var mkdocs_page_input_path = "Basic-benchmarking.md";
    var mkdocs_page_url = "/Basic-benchmarking/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Dynomite</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Architecture/">Architecture</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Basic benchmarking</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#stage-1-6-node-cluster">Stage 1 -   6 node cluster</a></li>
                
            
                <li class="toctree-l3"><a href="#stage-2-12-node-cluster">Stage 2 -   12 node cluster</a></li>
                
            
                <li class="toctree-l3"><a href="#stage-3-24-node-cluster">Stage 3 -   24 node cluster</a></li>
                
            
                <li class="toctree-l3"><a href="#replication-delay">Replication Delay</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Configuration/">Configuration</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Consistency/">Consistency</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Debugging/">Debugging</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Dynomite-Ecosystem/">Dynomite Ecosystem</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Dynomite-with-Redis-on-AWS---Benchmarks/">Dynomite with Redis on AWS   Benchmarks</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../FAQ/">FAQ</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Getting-Started/">Getting Started</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Home/">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../How-to-contribute/">How to contribute</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Membership-protocols/">Membership protocols</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Overview/">Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Performance/">Performance</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../REST/">REST</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Replication/">Replication</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Token-Management/">Token Management</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Topology/">Topology</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Use-Cases/">Use Cases</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Videos-and-Presentations/">Videos and Presentations</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Warm-up/">Warm up</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../_Sidebar/"> Sidebar</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Dynomite</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Basic benchmarking</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Details
<em> Server instance type was r3.xlarge. These instances are well suited for Dynomite workloads - i.e good balance between memory and network
</em> Replication factor was set to 3. We did this by deploying Dynomite in 3 zones in us-east-1 and each zone had the same no of servers and hence the same no of tokens. 
<em> Client fleet used instance type as m2.2xls which is also typical for an application here at Netflix. 
</em> Demo application used a simple workload of just key value pairs for read and writes i.e the Redis GET and SET api. 
<em> Payload size was chosen to be 1K 
</em> We maintained an 80% - 20% ratio between reads and writes which is also typical of many use cases here at Netflix.</p>
<h4 id="stage-1-6-node-cluster">Stage 1 -   6 node cluster</h4>
<p>We setup a Dynomite cluster of 6 nodes (i.e 2 per zone). 
We observed throughput of about 80k per second across the client fleet:
[[/images/linear_scale/linear_scale_6_rps.png|align=center]]</p>
<p>while keeping the avg latency ~1 ms:
[[/images/linear_scale/linear_scale_6_p50.png|align=center]]</p>
<p>and 99 percentile latency in the single digit ms range:
[[/images/linear_scale/linear_scale_6_p99.png|align=center]] </p>
<h4 id="stage-2-12-node-cluster">Stage 2 -   12 node cluster</h4>
<p>We then doubled the size of the Dynomite cluster from 6 nodes to 12 nodes. 
We also simultaneously doubled our client fleet to add more load on the cluster. </p>
<p>As expected client fleet throughput went up by 100%
[[/images/linear_scale/linear_scale_12_rps.png|align=center]]</p>
<p>while still keeping avg and 99 percentile latencies in check
[[/images/linear_scale/linear_scale_12_p50.png|align=center]]
[[/images/linear_scale/linear_scale_12_p99.png|align=center]] </p>
<h4 id="stage-3-24-node-cluster">Stage 3 -   24 node cluster</h4>
<p>We then went for one more double for the server and client fleet and throughput went up by 100% once again,
while latencies remained the same. 
[[/images/linear_scale/linear_scale_24_rps.png|align=center]]
[[/images/linear_scale/linear_scale_24_p50.png|align=center]]
[[/images/linear_scale/linear_scale_24_p99.png|align=center]] </p>
<h2 id="replication-delay">Replication Delay</h2>
<p>In our initial tests, we measured the time it took for a key/value pair to become available on another region replica by writing 1k key/value pairs to Dynomite in one region, then polling the other region randomly for 20 keys.  The value for each key in this case is just timestamp when the write action started.  The client in the other region then reads back those timestamps and compute the durations.  We repeated this same experiment several times and took the average.  From this we could derive a rough idea of the speed of the replication.  </p>
<p>We expect this latency to remain more or less constant as we add code path optimization as well as enhancements in the replication strategy itself (optimizations will improve speed, features will potentially add latency).  </p>
<p>Result:   </p>
<blockquote>
<p>For 5 iterations of this experiment, the average duration for replications was around 85ms.
(note that the duration numbers are measured at the client layers so the real numbers should be smaller).  </p>
</blockquote>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Configuration/" class="btn btn-neutral float-right" title="Configuration">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Architecture/" class="btn btn-neutral" title="Architecture"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Architecture/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Configuration/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
